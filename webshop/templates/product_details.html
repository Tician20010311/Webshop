{% extends 'base.html' %}
{% load static %}
{% block title %}Kedzőlap{% endblock %}


{% block content %}     
<div class="breadcrumbs">
  <div class="container">
      <div class="row align-items-center">
          <div class="col-lg-6 col-md-6 col-12">
              <div class="breadcrumbs-content">
                  <h1 class="page-title">{{ product.nev }}</h1>
              </div>
          </div>
          <div class="col-lg-6 col-md-6 col-12">
              <ul class="breadcrumb-nav">
                  <li><a href="{% url 'home' %}"><i class="lni lni-home"></i> Kezdőlap</a></li>
                  <li><a href="{{request.META.HTTP_REFERER}}">Előző oldal</a></li>
                  <li>{{ product.nev }}</li>
              </ul>
          </div>
      </div>
  </div>
</div>
<!-- End Breadcrumbs -->

<!-- Start Item Details -->
<section class="item-details section">
  <div class="container">
      <div class="top-area">
          <div class="row align-items-center">
              <div class="col-lg-6 col-md-12 col-12">
                  <div class="product-images">
                      <main id="gallery">
                          <div class="main-img">
                              <img src="{{ product.kep.url }}" id="current" alt="#">
                          </div>
                          <div class="images">
                              <img src="{% static 'images/product-details/01.jpg' %}" class="img" alt="#">
                              <img src="{% static 'images/product-details/02.jpg' %}" class="img" alt="#">
                          </div>
                      </main>
                  </div>
              </div>
              <div class="col-lg-6 col-md-12 col-12">
                  <div class="product-info">
                      <h2 class="title">{{ product.nev }}</h2>
                      <p class="category"><i class="lni lni-tag"></i> {{ product.kategoria }} :</p>
                      {% if product.akcios %}

                      <div class="price">
                        <strike>{{ product.ar }} Ft</strike>
                        &nbsp;{{ product.akcios_ar }} Ft 
                    </div>

                      {% else %}
                      <div class="price">
                        &nbsp;{{ product.ar }} Ft 
                      </br>&nbsp;ID : {{ product.id }}
                    </div>
                      {% endif %}
                      <p class="info-text">{{ product.leiras }}</p>
                      <div class="row">
                        <!--
                          <div class="col-lg-4 col-md-4 col-12">
                            
                              <div class="form-group">
                                  <label for="color">Battery capacity</label>
                                  <select class="form-control" id="color">
                                      <option>5100 mAh</option>
                                      <option>6200 mAh</option>
                                      <option>8000 mAh</option>
                                  </select>
                              </div>
                          </div>
                        -->
                          <div class="col-lg-4 col-md-4 col-12">
                              <div class="form-group quantity">
                                  <label for="color">Mennyiség</label>
                                  <select id="qty-cart" class="form-select">
                                      <option>1</option>
                                      <option>2</option>
                                      <option>3</option>
                                      <option>4</option>
                                      <option>5</option>
                                  </select>
                              </div>
                          </div>
                      </div>
                      <div class="bottom-content">
                          <div class="row align-items-end">
                              <div class="col-lg-4 col-md-4 col-12">
                                  <div class="button cart-button">
                                      <button type="button" value="{{ product.id }}" id="add-cart" class="btn" style="width: 100%;">Hozzáadás a kosárhoz</button>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      <div class="product-details-info">
          <div class="single-block">
              <div class="row">
                  <div class="col-lg-6 col-12">
                      <div class="info-body custom-responsive-margin">
                          <h4>Jellemzők</h4>
                          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                              incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
                              exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute
                              irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat.</p>
                          <h4>Features</h4>
                          <ul class="features">
                              <li>Capture 4K30 Video and 12MP Photos</li>
                              <li>Game-Style Controller with Touchscreen</li>
                              <li>View Live Camera Feed</li>
                              <li>Full Control of HERO6 Black</li>
                              <li>Use App for Dedicated Camera Operation</li>
                          </ul>
                      </div>
                  </div>
                  <div class="col-lg-6 col-12">
                      <div class="info-body">
                          <h4>Specifikációk</h4>
                          <ul class="normal-list">
                              <li><span>Weight:</span> 35.5oz (1006g)</li>
                              <li><span>Maximum Speed:</span> 35 mph (15 m/s)</li>
                              <li><span>Maximum Distance:</span> Up to 9,840ft (3,000m)</li>
                              <li><span>Operating Frequency:</span> 2.4GHz</li>
                              <li><span>Manufacturer:</span> GoPro, USA</li>
                          </ul>
                          <h4>Rendelési lehetőségek:</h4>
                          <ul class="normal-list">
                              <li><span>Courier:</span> 2 - 4 days, $22.50</li>
                              <li><span>Local Shipping:</span> up to one week, $10.00</li>
                              <li><span>UPS Ground Shipping:</span> 4 - 6 days, $18.00</li>
                              <li><span>Unishop Global Export:</span> 3 - 4 days, $25.00</li>
                          </ul>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>
</section>
<!-- End Item Details -->

<!-- Review Modal -->
<div class="modal fade review-modal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Leave a Review</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <div class="row">
                  <div class="col-sm-6">
                      <div class="form-group">
                          <label for="review-name">Your Name</label>
                          <input class="form-control" type="text" id="review-name" required>
                      </div>
                  </div>
                  <div class="col-sm-6">
                      <div class="form-group">
                          <label for="review-email">Your Email</label>
                          <input class="form-control" type="email" id="review-email" required>
                      </div>
                  </div>
              </div>
              <div class="row">
                  <div class="col-sm-6">
                      <div class="form-group">
                          <label for="review-subject">Subject</label>
                          <input class="form-control" type="text" id="review-subject" required>
                      </div>
                  </div>
                  <div class="col-sm-6">
                      <div class="form-group">
                          <label for="review-rating">Rating</label>
                          <select class="form-control" id="review-rating">
                              <option>5 Stars</option>
                              <option>4 Stars</option>
                              <option>3 Stars</option>
                              <option>2 Stars</option>
                              <option>1 Star</option>
                          </select>
                      </div>
                  </div>
              </div>
              <div class="form-group">
                  <label for="review-message">Review</label>
                  <textarea class="form-control" id="review-message" rows="8" required></textarea>
              </div>
          </div>
          <div class="modal-footer button">
              <button type="button" class="btn">Submit Review</button>
          </div>
      </div>
  </div>
</div>
<script>
    $(document).on('click', '#add-cart', function(e){
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: '{% url 'cart_add' %}',  
            data: {
                product_id: $('#add-cart').val(),
                product_qty: $('#qty-cart option:selected').text(),
                
                csrfmiddlewaretoken: '{{ csrf_token }}',
                action: 'post'
            },
            success: function(json){  
                console.log(json);
                document.getElementById("cart_quantity").textContent = json.qty
                location.reload();
            },
            error: function(xhr, errmsg, err){
                console.log("Hiba történt:", errmsg); // Hibakezelés hozzáadva
            }
        });
    });
</script>

{% endblock %}